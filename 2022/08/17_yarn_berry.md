## ☑️ npm의 문제점

* 거대해지고 패키지관리가 어려워지는 node\_module
* 협업 시 계속해서 충돌이 발생하는 package-lock.json
* 패키지 업데이트에 따른 버전 충돌관리의 어려움
* 환경에 따라 달라지는 결과물

> 고통받는 개발자들..

## ☑️ npm의 구조적 결함을 없앤 yarn

* yarn은 npm의 유령 의존성, node module 관리 등을 보다 유용하게 진행하는 패키지 매니저
* yarn 1버전대는 npm과 같이 node\_module과 yarn.lock을 생성하여 의존성 관리를 하였음.
* 하지만 지금은 1버전대는 더이상 업데이트되지 않고 2\~3버전대만 업데이트를 하고 있음.
* 3버전대인 yarn berry는 새로운 방식으로 패키지 관리를 할 수 있게 함. .yarn 디렉토리를 통해 캐시, 릴리즈, sdks 정보를 압축되거나 경량화된 버전으로 저장됨.
    * 자세한 설명은 [node\_modules로부터 우리를 구원해 줄 Yarn Berry](https://toss.tech/article/node-modules-and-yarn-berry)

## ☑️ yarn berry의 효과

### npm 사용 시

* 13분대에서 불필요한 코드 삭제로 인해 단축된 설치&빌드 시간이 ```6~8분```
* 여기서 설치 시간은 ```약 2분```

### yarn berry Zero-install 사용 시

* 설치 시간이 ```10초 내외```로 단축!!!(90% 이상 단축)
* 전체 설치&빌드 시간이 ```2분~5분```으로 단축!!(30% 이상 단축)

## 회고

* 정말 yarn berry가 필요한 상황이었을까? npm을 쓰고 npm, node 버전을 지정해 두었다면 package lock에서 계속 충돌이 발생하지는 않았을 것 같기도 하다. 
* 속도 면에서는 npm i에 비해서는 정말 빠르다. `npm ci`를 써봤을 때에도 빠르긴 했지만, 의존성 관련 이슈들이 종종 발생하기도 하였다. 이런 문제들을 겪지 않고도 빠르게 설치할 수 있다는 면에서 좋은 경험을 가져다 준다. 
* 프로젝트에서 yarn berry를 설정하게 되면 `.yarnrc.yml` 파일에 yarn 버전이 설정된다. 이 점이 세팅을 사람이 챙겨서 해야 했던 기존의 방법에서 좋아진 부분이라고 생각한다. 
사실 npm, node 버전을 설정할 수 있다는 것을 안지가 얼마 안되긴 했다.. ㅠ 이런거 몰라도 되도록 자동으로 해준다는 게 좋은 점이다! 휴먼이슈로 (너 왜 안 챙겼니?) 여겨졌던 것이 줄어들었으니 말이다.

